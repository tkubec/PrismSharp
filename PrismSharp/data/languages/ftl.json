{
  "ftl-comment": {
    "pattern": "r:/^<#--[\\s\\S]*/",
    "alias": "s:comment"
  },
  "ftl-directive": {
    "pattern": "r:/^<[\\s\\S]+>(?:(?=\\r$)|$)/",
    "inside": {
      "directive": {
        "pattern": "r:/(^<\\/?)[#@][a-z]\\w*/i",
        "lookbehind": true,
        "alias": "s:keyword"
      },
      "punctuation": "r:/^<\\/?|\\/?>(?:(?=\\r$)|$)/",
      "content": {
        "pattern": "r:/\\s*\\S[\\s\\S]*/",
        "alias": "s:ftl",
        "inside": {
          "comment": "r:/<#--[\\s\\S]*?-->/",
          "string": [
            {
              "pattern": "r:/\\br(\"|')(?:(?!\\1)[^\\\\]|\\\\[^\\r\\n])*\\1/",
              "greedy": true
            },
            {
              "pattern": "r:/(\"|')(?:(?!\\1|\\$\\{)[^\\\\]|\\\\[^\\r\\n]|\\$\\{(?:(?!\\})(?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^\\s\\S])*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*'))*\\})*\\1/",
              "greedy": true,
              "inside": {
                "interpolation": {
                  "pattern": "r:/((?:^|[^\\\\])(?:\\\\\\\\)*)\\$\\{(?:(?!\\})(?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^\\s\\S])*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*'))*\\}/",
                  "lookbehind": true,
                  "inside": {
                    "interpolation-punctuation": {
                      "pattern": "r:/^\\$\\{|\\}(?:(?=\\r$)|$)/",
                      "alias": "s:punctuation"
                    },
                    "rest": "s:[Circular ~.ftl-directive.inside.content.inside]"
                  }
                }
              }
            }
          ],
          "keyword": "r:/\\b(?:as)\\b/",
          "boolean": "r:/\\b(?:false|true)\\b/",
          "builtin-function": {
            "pattern": "r:/((?:^|[^?])\\?\\s*)\\w+/",
            "lookbehind": true,
            "alias": "s:function"
          },
          "function": "r:/\\b\\w+(?=\\s*\\()/",
          "number": "r:/\\b\\d+(?:\\.\\d+)?\\b/",
          "operator": "r:/\\.\\.[<*!]?|->|--|\\+\\+|&&|\\|\\||\\?{1,2}|[-+*/%!=<>]=?|\\b(?:gt|gte|lt|lte)\\b/",
          "punctuation": "r:/[,;.:()[\\]{}]/"
        }
      }
    }
  },
  "ftl-interpolation": {
    "pattern": "r:/^\\$\\{[\\s\\S]*\\}(?:(?=\\r$)|$)/",
    "inside": {
      "punctuation": "r:/^\\$\\{|\\}(?:(?=\\r$)|$)/",
      "content": {
        "pattern": "r:/\\s*\\S[\\s\\S]*/",
        "alias": "s:ftl",
        "inside": {
          "comment": "r:/<#--[\\s\\S]*?-->/",
          "string": [
            {
              "pattern": "r:/\\br(\"|')(?:(?!\\1)[^\\\\]|\\\\[^\\r\\n])*\\1/",
              "greedy": true
            },
            {
              "pattern": "r:/(\"|')(?:(?!\\1|\\$\\{)[^\\\\]|\\\\[^\\r\\n]|\\$\\{(?:(?!\\})(?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^\\s\\S])*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*'))*\\})*\\1/",
              "greedy": true,
              "inside": {
                "interpolation": {
                  "pattern": "r:/((?:^|[^\\\\])(?:\\\\\\\\)*)\\$\\{(?:(?!\\})(?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^<()\"']|\\((?:[^\\s\\S])*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*')*\\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|\"(?:[^\\\\\"]|\\\\[^\\r\\n])*\"|'(?:[^\\\\']|\\\\[^\\r\\n])*'))*\\}/",
                  "lookbehind": true,
                  "inside": {
                    "interpolation-punctuation": {
                      "pattern": "r:/^\\$\\{|\\}(?:(?=\\r$)|$)/",
                      "alias": "s:punctuation"
                    },
                    "rest": "s:[Circular ~.ftl-interpolation.inside.content.inside]"
                  }
                }
              }
            }
          ],
          "keyword": "r:/\\b(?:as)\\b/",
          "boolean": "r:/\\b(?:false|true)\\b/",
          "builtin-function": {
            "pattern": "r:/((?:^|[^?])\\?\\s*)\\w+/",
            "lookbehind": true,
            "alias": "s:function"
          },
          "function": "r:/\\b\\w+(?=\\s*\\()/",
          "number": "r:/\\b\\d+(?:\\.\\d+)?\\b/",
          "operator": "r:/\\.\\.[<*!]?|->|--|\\+\\+|&&|\\|\\||\\?{1,2}|[-+*/%!=<>]=?|\\b(?:gt|gte|lt|lte)\\b/",
          "punctuation": "r:/[,;.:()[\\]{}]/"
        }
      }
    }
  }
}